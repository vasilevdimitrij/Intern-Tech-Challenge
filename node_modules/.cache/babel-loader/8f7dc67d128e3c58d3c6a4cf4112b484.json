{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\vasil\\\\Desktop\\\\ass\\\\hotelreviewer-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\vasil\\\\Desktop\\\\ass\\\\hotelreviewer-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"C:\\\\Users\\\\vasil\\\\Desktop\\\\ass\\\\hotelreviewer-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\vasil\\\\Desktop\\\\ass\\\\hotelreviewer-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\vasil\\\\Desktop\\\\ass\\\\hotelreviewer-main\\\\src\\\\context\\\\ReviewsContextProvider.js\";\nimport React from 'react';\nimport Api from '../api';\nexport var ReviewsContext = React.createContext();\nvar initialValue = {\n  reviews: [],\n  loading: true,\n  error: ''\n};\n\nvar reducer = function reducer(value, action) {\n  switch (action.type) {\n    case 'GET_REVIEWS_SUCCESS':\n      return _objectSpread({}, value, {\n        reviews: action.payload,\n        loading: false\n      });\n\n    case 'GET_REVIEWS_ERROR':\n      return _objectSpread({}, value, {\n        reviews: [],\n        loading: false,\n        error: action.payload\n      });\n\n    case 'ADD_REVIEW_SUCCESS':\n      console.log(action);\n      return _objectSpread({}, value, {\n        reviews: [].concat(_toConsumableArray(value.reviews), [action.payload]),\n        loading: false\n      });\n\n    case 'ADD_REVIEW_ERROR':\n      return _objectSpread({}, value, {\n        loading: false,\n        error: 'Something went wrong...'\n      });\n\n    default:\n      return value;\n  }\n};\n\nvar ReviewsContextProvider = function ReviewsContextProvider(_ref) {\n  var children = _ref.children;\n\n  var _React$useReducer = React.useReducer(reducer, initialValue),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      value = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  var getReviewsRequest = function getReviewsRequest(id) {\n    var result;\n    return _regeneratorRuntime.async(function getReviewsRequest$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Api.fetchData(\"https://my-json-server.typicode.com/pranayfpackt/-React-Projects/hotels/\".concat(id, \"/reviews\")));\n\n          case 2:\n            result = _context.sent;\n\n            if (result.data && result.data.length) {\n              dispatch({\n                type: 'GET_REVIEWS_SUCCESS',\n                payload: result.data\n              });\n            } else {\n              dispatch({\n                type: 'GET_REVIEWS_ERROR',\n                payload: result.error\n              });\n            }\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var addReviewRequest = function addReviewRequest(content) {\n    var result;\n    return _regeneratorRuntime.async(function addReviewRequest$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Api.postData('https://my-json-server.typicode.com/pranayfpackt/-React-Projects/hotels', content));\n\n          case 2:\n            result = _context2.sent;\n\n            if (result.data && result.data.hasOwnProperty('id')) {\n              dispatch({\n                type: 'ADD_REVIEW_SUCCESS',\n                payload: content\n              });\n            } else {\n              dispatch({\n                type: 'ADD_REVIEW_ERROR'\n              });\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  return React.createElement(ReviewsContext.Provider, {\n    value: _objectSpread({}, value, {\n      getReviewsRequest: getReviewsRequest,\n      addReviewRequest: addReviewRequest\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, children);\n};\n\nexport default ReviewsContextProvider;","map":{"version":3,"sources":["C:/Users/vasil/Desktop/ass/hotelreviewer-main/src/context/ReviewsContextProvider.js"],"names":["React","Api","ReviewsContext","createContext","initialValue","reviews","loading","error","reducer","value","action","type","payload","console","log","ReviewsContextProvider","children","useReducer","dispatch","getReviewsRequest","id","fetchData","result","data","length","addReviewRequest","content","postData","hasOwnProperty"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Api from '../api';\n\nexport const ReviewsContext = React.createContext();\n\nconst initialValue = {\n  reviews: [],\n  loading: true,\n  error: '',\n};\n\nconst reducer = (value, action) => {\n  switch (action.type) {\n    case 'GET_REVIEWS_SUCCESS':\n      return {\n        ...value,\n        reviews: action.payload,\n        loading: false,\n      };\n    case 'GET_REVIEWS_ERROR':\n      return {\n        ...value,\n        reviews: [],\n        loading: false,\n        error: action.payload,\n      };\n    case 'ADD_REVIEW_SUCCESS':\n      console.log(action);\n      return {\n        ...value,\n        reviews: [...value.reviews, action.payload],\n        loading: false,\n      };\n    case 'ADD_REVIEW_ERROR':\n      return {\n        ...value,\n        loading: false,\n        error: 'Something went wrong...',\n      };\n    default:\n      return value;\n  }\n};\n\nconst ReviewsContextProvider = ({ children }) => {\n  const [value, dispatch] = React.useReducer(reducer, initialValue);\n\n  const getReviewsRequest = async id => {\n    const result = await Api.fetchData(\n      `https://my-json-server.typicode.com/pranayfpackt/-React-Projects/hotels/${id}/reviews`,\n    );\n\n    if (result.data && result.data.length) {\n      dispatch({ type: 'GET_REVIEWS_SUCCESS', payload: result.data });\n    } else {\n      dispatch({ type: 'GET_REVIEWS_ERROR', payload: result.error });\n    }\n  };\n\n  const addReviewRequest = async content => {\n    const result = await Api.postData(\n      'https://my-json-server.typicode.com/pranayfpackt/-React-Projects/hotels',\n      content,\n    );\n\n    if (result.data && result.data.hasOwnProperty('id')) {\n      dispatch({ type: 'ADD_REVIEW_SUCCESS', payload: content });\n    } else {\n      dispatch({ type: 'ADD_REVIEW_ERROR' });\n    }\n  };\n\n  return (\n    <ReviewsContext.Provider\n      value={{ ...value, getReviewsRequest, addReviewRequest }}\n    >\n      {children}\n    </ReviewsContext.Provider>\n  );\n};\n\nexport default ReviewsContextProvider;\n"]},"metadata":{},"sourceType":"module"}